jQuery(document).ready(function(e){function t(t,i){var a={onChange:null},n={contain:null,pageLeft:null,pageRight:null,currentPage:null},o=function(){var e=n.currentPage.children().length,t=Number(n.currentPage.val());n.pageLeft.hide(),n.pageRight.hide(),t>1&&n.pageLeft.show(),t+1<=e&&n.pageRight.show()};this.getCurrentPage=function(){return n.currentPage.val()},this.setNumPage=function(t){n.currentPage.empty();for(var i=1;i<=t;i++)e(document.createElement("option")).val(i).text(i).appendTo(n.currentPage);o()},function(){e.extend(n,{contain:t,pageLeft:t.find(".navigationLeft"),pageRight:t.find(".navigationRight"),currentPage:t.find(".navigationCurrentPage")}),e.extend(a,i),n.pageLeft.click(function(){n.currentPage.val(Number(n.currentPage.val())-1),o(),a.onChange&&a.onChange(n.currentPage.val())}),n.pageRight.click(function(){n.currentPage.val(Number(n.currentPage.val())+1),o(),a.onChange&&a.onChange(n.currentPage.val())}),n.currentPage.change(function(){o(),a.onChange&&a.onChange(n.currentPage.val())})}()}e.fn.wpTrivia_preview=function(){var t={openPreview:function(t){window.open(e(t).attr("href"),"wpTriviaPreview","width=900,height=900")}};!function(){e(".wpTrivia_prview").click(function(e){t.openPreview(this),e.preventDefault()})}()},e.fn.wpTrivia_quizEdit=function(){function t(t,i,a){var n={action:"wp_pro_quiz_admin_ajax",func:t,data:i};e.post(ajaxurl,n,a,"json")}var i={addCategory:function(){var i=e.trim(e('input[name="categoryAdd"]').val());if(!a(i)){t("categoryAdd",{categoryName:i,type:"quiz"},function(t){if(t.err)return void e("#categoryMsgBox").text(t.err).show("fast").delay(2e3).hide("fast");var i=e(document.createElement("option")).val(t.categoryId).text(t.categoryName).attr("selected","selected");e('select[name="category"]').append(i).change()})}},addResult:function(){e("#resultList").children().each(function(){if("none"==e(this).css("display")){var t=e(this),i=t.find('textarea[name="resultTextGrade[text][]"]'),a=i.attr("id"),n=!0;return t.find('input[name="resultTextGrade[prozent][]"]').val("0"),t.find('input[name="resultTextGrade[activ][]"]').val("1").keyup(),void 0==tinymce.editors[a]||tinymce.editors[a].isHidden()||(n=!1),void 0==switchEditors||n||(switchEditors.go(a,"toggle"),switchEditors.go(a,"toggle")),void 0!=tinymce.editors[a]?tinymce.editors[a].setContent(""):i.val(""),void 0==tinymce.editors[a]||n||tinyMCE.execCommand("mceRemoveControl",!1,a),t.parent().children(":visible").last().after(t),void 0==tinymce.editors[a]||n||tinyMCE.execCommand("mceAddControl",!1,a),e(this).show(),void 0==switchEditors||n||switchEditors.go(a,"toggle"),!1}})},deleteResult:function(t){e(t).parent().parent().hide(),e(t).siblings('input[name="resultTextGrade[activ][]"]').val("0")},changeResult:function(t){var a=e(t);return i.validResultInput(a.val())?(a.siblings(".resultProzent").text(a.val()),a.removeAttr("style"),!0):(a.css("background-color","#FF9696"),!1)},validResultInput:function(e){return!a(e)&&(e=e.replace(/\,/,"."),!isNaN(e)&&Number(e)<=100&&Number(e)>=0&&(null==e.match(/\./)||e.split(".")[1].length<3))},validInput:function(){if(a(e("#wpTrivia_title").val()))return alert(wpTriviaLocalize.no_title_msg),!1;var t="";if(t=void 0==tinymce.editors.text||tinymce.editors.text.isHidden()?e('textarea[name="text"]').val():tinymce.editors.text.getContent(),a(t))return alert(wpTriviaLocalize.no_quiz_start_msg),!1;if(e("#wpTrivia_resultGradeEnabled:checked").length){var n=!0;if(e("#resultList").children().each(function(){if(e(this).is(":visible")&&!i.validResultInput(e(this).find('input[name="resultTextGrade[prozent][]"]').val()))return n=!1,!1}),!n)return alert(wpTriviaLocalize.fail_grade_result),!1}return!0},resetLock:function(){t("resetLock",{quizId:e('input[name="ajax_quiz_id"]').val()},function(){e("#resetLockMsg").show("fast").delay(2e3).hide("fast")})},generateFormIds:function(){var t=0;e("#form_table tbody > tr").each(function(){e(this).find('[name^="form[]"]').each(function(){var i=e(this).attr("name").substr(6);e(this).attr("name","form["+t+"]"+i)}),++t})},updateFormIds:function(){var t=-1,i=e(".emailFormVariables option:selected").val(),n=e(".formVariables").empty(),o=e(".emailFormVariables").empty().append('<option value="-1"></option>');e(".emailFormVariables").data("default")>-1&&(i=e(".emailFormVariables").data("default"),e(".emailFormVariables").data("default",-1)),e("#form_table tbody > tr").each(function(){e(this).children().first().text(t);var i=e(this).find(".formFieldName").val(),r=e(this).find('[name="form[][type]"] option:selected'),c=e(this).find('[name="form[][fieldname]"]').val();1!=e(this).find('input[name="form[][form_delete]"]').val()&&(t>=0&&!a(i)&&n.append(e("<li><span>$form{"+t+"}</span> - "+i+"</li>")),4==r.val()&&o.append(e('<option value="'+t+'">'+c+"</option>")),t++)}),e('.emailFormVariables option[value="'+i+'"]').prop("selected",!0)}},a=function(t){return!(t=e.trim(t))||0===t.length};!function(){e("#statistics_on").change(function(){this.checked?e("#statistics_ip_lock_tr").show():e("#statistics_ip_lock_tr").hide()}),e(".addResult").click(function(){i.addResult()}),e(".deleteResult").click(function(e){i.deleteResult(this)}),e('input[name="resultTextGrade[prozent][]"]').keyup(function(e){i.changeResult(this)}).keydown(function(e){13==e.which&&e.preventDefault()}),e("#wpTrivia_resultGradeEnabled").change(function(){this.checked?(e("#resultGrade").show(),e("#resultNormal").hide()):(e("#resultGrade").hide(),e("#resultNormal").show())}),e("#wpTrivia_save").click(function(t){i.validInput()?i.generateFormIds():t.preventDefault(),e('select[name="prerequisiteList[]"] option').attr("selected","selected")}),e('input[name="template"]').click(function(t){if("0"==e('select[name="templateSaveList"]').val()&&a(e('input[name="templateName"]').val()))return alert(wpTriviaLocalize.temploate_no_name),t.preventDefault(),!1;i.generateFormIds(),e('select[name="prerequisiteList[]"] option').attr("selected","selected")}),e('select[name="templateSaveList"]').change(function(){var t=e('input[name="templateName"]');"0"==e(this).val()?t.show():t.hide()}).change(),e('input[name="quizRunOnce"]').change(function(t){this.checked?(e("#wpTrivia_quiz_run_once_type").show(),e('input[name="quizRunOnceType"]:checked').change()):e("#wpTrivia_quiz_run_once_type").hide()}),e('input[name="quizRunOnceType"]').change(function(t){!this.checked||"1"!=this.value&&"3"!=this.value?e("#wpTrivia_quiz_run_once_cookie").hide():e("#wpTrivia_quiz_run_once_cookie").show()}),e('input[name="resetQuizLock"]').click(function(e){return i.resetLock(),!1}),e(".wpTrivia_demoBox a").mouseover(function(t){var i=e(this),a=e("#poststuff").width(),n=i.siblings().outerWidth(!0);if(t.pageX+n>a){var o=jQuery(document).width()-i.parent().offset().left-n-30;e(this).next().css("left",o+"px")}e(this).next().show()}).mouseout(function(){e(this).next().hide()}).click(function(){return!1}),e('input[name="showMaxQuestion"]').change(function(){this.checked?e("#wpTrivia_showMaxBox").show():e("#wpTrivia_showMaxBox").hide()}),e("#btnPrerequisiteAdd").click(function(){e('select[name="quizList"] option:selected').removeAttr("selected").appendTo('select[name="prerequisiteList[]"]')}),e("#btnPrerequisiteDelete").click(function(){e('select[name="prerequisiteList[]"] option:selected').removeAttr("selected").appendTo('select[name="quizList"]')}),e('input[name="prerequisite"]').change(function(){this.checked?e("#prerequisiteBox").show():e("#prerequisiteBox").hide()}).change(),e('input[name="toplistDataAddMultiple"]').change(function(){this.checked?e("#toplistDataAddBlockBox").show():e("#toplistDataAddBlockBox").hide()}).change(),e('input[name="toplistActivated"]').change(function(){this.checked?e("#toplistBox > tr:gt(0)").show():e("#toplistBox > tr:gt(0)").hide()}).change(),e('input[name="showReviewQuestion"]').change(function(){this.checked?e(".wpTrivia_reviewQuestionOptions").show():e(".wpTrivia_reviewQuestionOptions").hide()}).change(),e("#statistics_on").change(),e("#wpTrivia_resultGradeEnabled").change(),e('input[name="quizRunOnce"]').change(),e('input[name="quizRunOnceType"]:checked').change(),e('input[name="showMaxQuestion"]').change(),e("#form_add").click(function(){e("#form_table tbody > tr:eq(0)").clone(!0).appendTo("#form_table tbody").show(),i.updateFormIds()}),e('input[name="form_delete"]').click(function(){var t=e(this).parents("tr");"0"!=t.find('input[name="form[][form_id]"]').val()?(t.find('input[name="form[][form_delete]"]').val(1),t.hide()):t.remove(),i.updateFormIds()}),e("#form_table tbody").sortable({handle:".form_move",update:i.updateFormIds}),e(".form_move").click(function(){return!1}),e('select[name="form[][type]"]').change(function(){switch(Number(e(this).val())){case 7:case 8:e(this).siblings(".editDropDown").show();break;default:e(this).siblings(".editDropDown, .dropDownEditBox").hide()}}).change(),e(".editDropDown").click(function(){return e(".dropDownEditBox").not(e(this).siblings(".dropDownEditBox").toggle()).hide(),!1}),e(".dropDownEditBox input").click(function(){e(this).parent().hide()}),e('.formFieldName, select[name="form[][type]"]').change(function(){i.updateFormIds()}),e('select[name="category"]').change(function(){var t=e(this),i=e("#categoryAddBox").hide();"-1"==t.val()&&i.show()}).change(),e("#categoryAddBtn").click(function(){i.addCategory()}),e('input[name="emailNotification"]').change(function(){var t=e("#adminEmailSettings tr:gt(0)");e('input[name="emailNotification"]:checked').val()>0?t.show():t.hide()}).change(),e('input[name="userEmailNotification"]').change(function(){var t=e("#userEmailSettings tr:gt(0)");e('input[name="userEmailNotification"]:checked').val()>0?t.show():t.hide()}).change(),i.updateFormIds(),e('input[name="email[html]"]').change(function(){if(void 0==switchEditors)return!1;this.checked?switchEditors.go("adminEmailEditor","tmce"):switchEditors.go("adminEmailEditor","html")}),e('input[name="adminEmail[html]"]').change(function(){if(void 0==switchEditors)return!1;this.checked?switchEditors.go("adminEmailEditor","tmce"):switchEditors.go("adminEmailEditor","html")}),e('input[name="userEmail[html]"]').change(function(){if(void 0==switchEditors)return!1;this.checked?switchEditors.go("userEmailEditor","tmce"):switchEditors.go("userEmailEditor","html")}),setTimeout(function(){e('input[name="userEmail[html]"]').change(),e('input[name="email[html]"]').change()},1e3)}()},e.fn.wpTrivia_statistics=function(){var t="wpTrivia_typeAnonymeUser",i=!0,a={loadStatistics:function(t){var i=window.location.pathname+window.location.search,n=i.replace("admin.php","admin-ajax.php")+"&action=load_statistics",o={action:"wp_pro_quiz_load_statistics",userId:t};e("#wpTrivia_loadData").show(),e("#wpTrivia_statistics_content, #wpTrivia_statistics_overview").hide(),e.post(n,o,a.setStatistics,"json")},setStatistics:function(i){var a=e(".wpTrivia_statistics_table"),n=a.find("tbody");if("wpTrivia_typeOverview"!=t){var o=function(e,t,i){e.find(".wpTrivia_cCorrect").text(t.cCorrect+" ("+t.pCorrect+"%)"),e.find(".wpTrivia_cIncorrect").text(t.cIncorrect+" ("+t.pIncorrect+"%)"),e.find(".wpTrivia_cTip").text(t.cTip),e.find(".wpTrivia_cPoints").text(t.cPoints),1==i&&a.find(".wpTrivia_cResult").text(t.result+"%")};o(a,i.clear,!1),e.each(i.items,function(e,t){o(n.find("#wpTrivia_tr_"+t.id),t,!1)}),o(a.find("tfoot"),i.global,!0),e("#wpTrivia_loadData").hide(),e("#wpTrivia_statistics_content, .wpTrivia_statistics_table").show()}},loadOverview:function(){e(".wpTrivia_statistics_table, #wpTrivia_statistics_content, #wpTrivia_statistics_overview").hide(),e("#wpTrivia_loadData").show();var n=window.location.pathname+window.location.search,o=n.replace("admin.php","admin-ajax.php")+"&action=load_statistics",r={action:"wp_pro_quiz_load_statistics",overview:!0,pageLimit:e("#wpTrivia_pageLimit").val(),onlyCompleted:Number(e("#wpTrivia_onlyCompleted").is(":checked")),page:e("#wpTrivia_currentPage").val(),generatePageNav:Number(i)};e.post(o,r,function(n){if(e("#wpTrivia_statistics_overview_data").empty(),"wpTrivia_typeOverview"==t){var o=e('<tr><th><a href="#">---</a></th><th class="wpTrivia_points">---</th><th class="wpTrivia_cCorrect" style="color: green;">---</th><th class="wpTrivia_cIncorrect" style="color: red;">---</th><th class="wpTrivia_cTip">---</th><th class="wpTrivia_cResult" style="font-weight: bold;">---</th></tr>');e.each(n.items,function(t,i){var a=o.clone();a.find("a").text(i.userName).data("userId",i.userId).click(function(){return e("#userSelect").val(e(this).data("userId")),e("#wpTrivia_typeRegisteredUser").click(),!1}),i.completed?(a.find(".wpTrivia_points").text(i.cPoints),a.find(".wpTrivia_cCorrect").text(i.cCorrect+" ("+i.pCorrect+"%)"),a.find(".wpTrivia_cIncorrect").text(i.cIncorrect+" ("+i.pIncorrect+"%)"),a.find(".wpTrivia_cTip").text(i.cTip),a.find(".wpTrivia_cResult").text(i.result+"%")):a.find("th").removeAttr("style"),e("#wpTrivia_statistics_overview_data").append(a)}),void 0!=n.page&&(a.setPageNav(n.page),i=!1),e("#wpTrivia_loadData").hide(),e("#wpTrivia_statistics_overview").show()}},"json")},loadFormOverview:function(){e("#wpTrivia_tabFormOverview").show()},changeTab:function(i){t=i,"wpTrivia_typeRegisteredUser"==i?a.loadStatistics(e("#userSelect").val()):"wpTrivia_typeAnonymeUser"==i?a.loadStatistics(0):"wpTrivia_typeForm"==i?a.loadFormOverview():a.loadOverview()},resetStatistic:function(i){var n="wpTrivia_typeRegisteredUser"==t?e("#userSelect").val():0,o=window.location.pathname+window.location.search,r=o.replace("admin.php","admin-ajax.php")+"&action=reset",c={action:"wp_pro_quiz_statistics",userId:n,complete:i};e.post(r,c,function(e){a.changeTab(t)})},setPageNav:function(t){t=Math.ceil(t/e("#wpTrivia_pageLimit").val()),e("#wpTrivia_currentPage").empty();for(var i=1;i<=t;i++)e(document.createElement("option")).val(i).text(i).appendTo(e("#wpTrivia_currentPage"));e("#wpTrivia_pageLeft, #wpTrivia_pageRight").hide(),e("#wpTrivia_currentPage option").length>1&&e("#wpTrivia_pageRight").show()}};!function(){e(".wpTrivia_tab").click(function(t){var i=e(this);return!i.hasClass("button-primary")&&("wpTrivia_typeRegisteredUser"==i.attr("id")?e("#wpTrivia_userBox").show():e("#wpTrivia_userBox").hide(),e(".wpTrivia_tab").removeClass("button-primary").addClass("button-secondary"),i.removeClass("button-secondary").addClass("button-primary"),a.changeTab(i.attr("id")),!1)}),e("#userSelect").change(function(){a.changeTab("wpTrivia_typeRegisteredUser")}),e(".wpTrivia_update").click(function(){return a.changeTab(t),!1}),e("#wpTrivia_reset").click(function(){return confirm(wpTriviaLocalize.reset_statistics_msg)&&a.resetStatistic(!1),!1}),e(".wpTrivia_resetComplete").click(function(){return confirm(wpTriviaLocalize.reset_statistics_msg)&&a.resetStatistic(!0),!1}),e("#wpTrivia_pageLimit, #wpTrivia_onlyCompleted").change(function(){return e("#wpTrivia_currentPage").val(0),i=!0,a.changeTab(t),!1}),e("#wpTrivia_currentPage").change(function(){e("#wpTrivia_pageLeft, #wpTrivia_pageRight").hide(),1==e("#wpTrivia_currentPage option").length||(e("#wpTrivia_currentPage option:first-child:selected").length?e("#wpTrivia_pageRight").show():e("#wpTrivia_currentPage option:last-child:selected").length?e("#wpTrivia_pageLeft").show():e("#wpTrivia_pageLeft, #wpTrivia_pageRight").show()),a.changeTab(t)}),e("#wpTrivia_pageRight").click(function(){return e("#wpTrivia_currentPage option:selected").next().attr("selected","selected"),e("#wpTrivia_currentPage").change(),!1}),e("#wpTrivia_pageLeft").click(function(){return e("#wpTrivia_currentPage option:selected").prev().attr("selected","selected"),e("#wpTrivia_currentPage").change(),!1}),a.changeTab("wpTrivia_typeAnonymeUser")}()},e.fn.wpTrivia_toplist=function(){function t(t,i,a){var n={action:"wp_pro_quiz_admin_ajax",func:t,data:i};e.post(ajaxurl,n,a,"json")}var i={sort:e("#wpTrivia_sorting"),pageLimit:e("#wpTrivia_pageLimit"),currentPage:e("#wpTrivia_currentPage"),loadDataBox:e("#wpTrivia_loadData"),pageLeft:e("#wpTrivia_pageLeft"),pageRight:e("#wpTrivia_pageRight"),dataBody:e("#wpTrivia_toplistTable tbody"),rowClone:e("#wpTrivia_toplistTable tbody tr:eq(0)").clone(),content:e("#wpTrivia_content")},a={loadData:function(a){var n=this,o={sort:i.sort.val(),limit:i.pageLimit.val(),page:i.currentPage.val(),quizId:e('input[name="ajax_quiz_id"]').val()};void 0!=a&&e.extend(o,a),i.loadDataBox.show(),i.content.hide(),t("adminToplist",o,function(e){n.handleDataRequest(e.data),void 0!=e.nav&&n.handleNav(e.nav),i.loadDataBox.hide(),i.content.show()})},handleNav:function(t){i.currentPage.empty();for(var a=1;a<=t.pages;a++)e(document.createElement("option")).val(a).text(a).appendTo(i.currentPage);this.checkNav()},handleDataRequest:function(t){var a=this;i.dataBody.empty(),e.each(t,function(e,t){var a=i.rowClone.clone().children();a.eq(0).children().val(t.id),a.eq(1).find("strong").text(t.name),a.eq(1).find(".inline_editUsername").val(t.name),a.eq(2).find(".wpTrivia_email").text(t.email),a.eq(2).find("input").val(t.email),a.eq(3).text(t.type),a.eq(4).text(t.date),a.eq(5).text(t.points),a.eq(6).text(t.result),a.parent().show().appendTo(i.dataBody)}),t.length||e(document.createElement("td")).attr("colspan","7").text(wpTriviaLocalize.no_data_available).css({"font-weight":"bold","text-align":"center",padding:"5px"}).appendTo(document.createElement("tr")).appendTo(i.dataBody),e(".wpTrivia_delete").click(function(){if(confirm(wpTriviaLocalize.confirm_delete_entry)){var t=new Array(e(this).closest("tr").find('input[name="checkedData[]"]').val());a.loadData({a:"delete",toplistIds:t})}return!1}),e(".wpTrivia_edit").click(function(){var t=e(this).closest("tr");return t.find(".row-actions").hide(),t.find(".inline-edit").show(),t.find(".wpTrivia_username, .wpTrivia_email").hide(),t.find(".inline_editUsername, .inline_editEmail").show(),!1}),e(".inline_editSave").click(function(){var t=e(this).closest("tr"),i=t.find(".inline_editUsername").val(),n=t.find(".inline_editEmail").val();return a.isEmpty(i)||a.isEmpty(n)?(alert(wpTriviaLocalize.not_all_fields_completed),!1):(a.loadData({a:"edit",toplistId:t.find('input[name="checkedData[]"]').val(),name:i,email:n}),!1)}),e(".inline_editCancel").click(function(){var t=e(this).closest("tr");return t.find(".row-actions").show(),t.find(".inline-edit").hide(),t.find(".wpTrivia_username, .wpTrivia_email").show(),t.find(".inline_editUsername, .inline_editEmail").hide(),t.find(".inline_editUsername").val(t.find(".wpTrivia_username").text()),t.find(".inline_editEmail").val(t.find(".wpTrivia_email").text()),!1})},checkNav:function(){var e=i.currentPage.val();1==e?i.pageLeft.hide():i.pageLeft.show(),e==i.currentPage.children().length?i.pageRight.hide():i.pageRight.show()},isEmpty:function(t){return!(t=e.trim(t))||0===t.length}};!function(){i.sort.change(function(){a.loadData()}),i.pageLimit.change(function(){a.loadData({nav:1})}),i.currentPage.change(function(){a.checkNav(),a.loadData()}),i.pageLeft.click(function(){i.currentPage.val(Number(i.currentPage.val())-1),a.checkNav(),a.loadData()}),i.pageRight.click(function(){i.currentPage.val(Number(i.currentPage.val())+1),a.checkNav(),a.loadData()}),e("#wpTrivia_deleteAll").click(function(){a.loadData({a:"deleteAll"})}),e("#wpTrivia_action").click(function(){var t=e("#wpTrivia_actionName").val();if("0"!=t){var i=e('input[name="checkedData[]"]:checked').map(function(){return e(this).val()}).get();a.loadData({a:t,toplistIds:i})}}),e("#wpTrivia_checkedAll").change(function(){this.checked?e('input[name="checkedData[]"]').attr("checked","checked"):e('input[name="checkedData[]"]').removeAttr("checked","checked")}),a.loadData({nav:1})}()},e(".wpTrivia_quizOverall").length&&e(".wpTrivia_quizOverall").wpTrivia_preview(),e(".wpTrivia_quizOverall").length&&e(".wpTrivia_quizOverall").wpTrivia_quizOverall(),e(".wpTrivia_quizEdit").length&&e(".wpTrivia_quizEdit").wpTrivia_quizEdit(),e(".wpTrivia_toplist").length&&e(".wpTrivia_toplist").wpTrivia_toplist(),function(){var i=this;i={displayChecked:function(e,t,i,a){var n=i?!e.checked:e.checked;a?n?t.attr("disabled","disabled"):t.removeAttr("disabled"):n?t.show():t.hide()},isEmpty:function(t){return!(t=e.trim(t))||0===t.length},isNumber:function(t){return t=e.trim(t),!i.isEmpty(t)&&!isNaN(t)},getMceContent:function(t){var i=tinymce.editors[t];return void 0==i||i.isHidden()?e("#"+t).val():i.getContent()},ajaxPost:function(t,i,a){var n={action:"wp_pro_quiz_admin_ajax",func:t,data:i};e.post(ajaxurl,n,a,"json")}};var a=function(){e(".wpTrivia_tab_wrapper a").click(function(){var t=e(this),i=t.data("tab"),a=t.siblings(".button-primary").removeClass("button-primary").addClass("button-secondary");return t.removeClass("button-secondary").addClass("button-primary"),e(a.data("tab")).hide("fast"),e(i).show("fast"),e(document).trigger({type:"changeTab",tabId:i}),!1})},n={gobalSettings:function(){var t={categoryDelete:function(t,a){var n={categoryId:t};i.ajaxPost("categoryDelete",n,function(i){i.err||(e('select[name="category'+a+'"] option[value="'+t+'"]').remove(),e('select[name="category'+a+'"]').change())})},categoryEdit:function(t,a,n){var o={categoryId:t,categoryName:e.trim(a)};if(i.isEmpty(a))return void alert(wpTriviaLocalize.category_no_name);i.ajaxPost("categoryEdit",o,function(i){i.err||(e('select[name="category'+n+'"] option[value="'+t+'"]').text(o.categoryName),e('select[name="category'+n+'"]').change())})},changeTimeFormat:function(t,i){"0"!=i.val()&&e('input[name="'+t+'"]').val(i.val())},templateDelete:function(t,a){var n={templateId:t,type:a};i.ajaxPost("templateDelete",n,function(i){i.err||(a?(e('select[name="templateQuestion"] option[value="'+t+'"]').remove(),e('select[name="templateQuestion"]').change()):(e('select[name="templateQuiz"] option[value="'+t+'"]').remove(),e('select[name="templateQuiz"]').change()))})},templateEdit:function(t,a,n){if(i.isEmpty(a))return void alert(wpTriviaLocalize.category_no_name);var o={templateId:t,name:e.trim(a),type:n};i.ajaxPost("templateEdit",o,function(i){i.err||(n?(e('select[name="templateQuestion"] option[value="'+t+'"]').text(o.name),e('select[name="templateQuestion"]').change()):(e('select[name="templateQuiz"] option[value="'+t+'"]').text(o.name),e('select[name="templateQuiz"]').change()))})}};!function(){e('select[name="category"]').change(function(){e('input[name="categoryEditText"]').val(e(this).find(":selected").text())}).change(),e('input[name="categoryDelete"]').click(function(){var i=e('select[name="category"] option:selected').val();t.categoryDelete(i,"")}),e('input[name="categoryEdit"]').click(function(){var i=e('select[name="category"] option:selected').val(),a=e('input[name="categoryEditText"]').val();t.categoryEdit(i,a,"")}),e('select[name="categoryQuiz"]').change(function(){e('input[name="categoryQuizEditText"]').val(e(this).find(":selected").text())}).change(),e('input[name="categoryQuizDelete"]').click(function(){var i=e('select[name="categoryQuiz"] option:selected').val();t.categoryDelete(i,"Quiz")}),e('input[name="categoryQuizEdit"]').click(function(){var i=e('select[name="categoryQuiz"] option:selected').val(),a=e('input[name="categoryQuizEditText"]').val();t.categoryEdit(i,a,"Quiz")}),e("#statistic_time_format_select").change(function(){t.changeTimeFormat("statisticTimeFormat",e(this))}),e(document).bind("changeTab",function(t){switch(e("#problemInfo").hide("fast"),t.tabId){case"#problemContent":e("#problemInfo").show("fast")}}),e('input[name="email[html]"]').change(function(){if(void 0==switchEditors)return!1;this.checked?switchEditors.go("adminEmailEditor","tmce"):switchEditors.go("adminEmailEditor","html")}).change(),e('input[name="userEmail[html]"]').change(function(){if(void 0==switchEditors)return!1;this.checked?switchEditors.go("userEmailEditor","tmce"):switchEditors.go("userEmailEditor","html")}).change(),e('select[name="templateQuiz"]').change(function(){e('input[name="templateQuizEditText"]').val(e(this).find(":selected").text())}).change(),e('select[name="templateQuestion"]').change(function(){e('input[name="templateQuestionEditText"]').val(e(this).find(":selected").text())}).change(),e('input[name="templateQuizDelete"]').click(function(){var i=e('select[name="templateQuiz"] option:selected').val();t.templateDelete(i,0)}),e('input[name="templateQuestionDelete"]').click(function(){var i=e('select[name="templateQuestion"] option:selected').val();t.templateDelete(i,1)}),e('input[name="templateQuizEdit"]').click(function(){var i=e('select[name="templateQuiz"] option:selected').val(),a=e('input[name="templateQuizEditText"]').val();t.templateEdit(i,a,0)}),e('input[name="templateQuestionEdit"]').click(function(){var i=e('select[name="templateQuestion"] option:selected').val(),a=e('input[name="templateQuestionEditText"]').val();t.templateEdit(i,a,1)})}()},questionEdit:function(){var t=this,a=e.noop(),n={answerChildren:e(".answer_felder > div"),pointsModus:e('input[name="answerPointsActivated"]'),gPoints:e('input[name="points"]')};t={generateArrayIndex:function(){var t=e('input[name="answerType"]:checked').val();t="single"==t||"multiple"==t?"classic_answer":t,e(".answerList").each(function(){var i=e(this).parent().attr("class");e(this).children().each(function(a,n){e(this).find('[name^="answerData"]').each(function(){var e=this.name,n=e.search(/\](\[\w+\])+$/),o=t==i?a:"none";n>0&&(this.name="answerData["+o+e.substring(n,e.length))})})})},globalValidate:function(){if(i.isEmpty(i.getMceContent("question")))return alert(wpTriviaLocalize.no_question_msg),!1;if(n.pointsModus.is(":checked")){if("free_answer"==e('input[name="answerType"]:checked').val())return alert(wpTriviaLocalize.dif_points),!1}else{var t=n.gPoints.val();if(!i.isNumber(t)||t<1)return alert(wpTriviaLocalize.no_nummber_points),!1}return!1!==a()},answerRemove:function(){var t=e(this).parent();return!(t.parent().children().length<2||(t.remove(),1))},addCategory:function(){var t=e.trim(e('input[name="categoryAdd"]').val());if(!i.isEmpty(t)){var a={categoryName:t};i.ajaxPost("categoryAdd",a,function(t){if(t.err)return void e("#categoryMsgBox").text(t.err).show("fast").delay(2e3).hide("fast");var i=e(document.createElement("option")).val(t.categoryId).text(t.categoryName).attr("selected","selected");e('select[name="category"]').append(i).change()})}},addMediaClick:function(){if("function"!=typeof tb_show)return!1;var t=e(this).closest("li"),i=t.find('input[name="answerData[][html]"]:eq(0)'),a=t.find(".wpTrivia_text:eq(0)");window.org_send_to_editor=window.send_to_editor;var n=tb_remove;window.send_to_editor=function(t){var n=e("img",t)[0].outerHTML;a.val(a.val()+n),i.attr("checked",!0),tb_remove(),window.send_to_editor=window.org_send_to_editor},window.tb_remove=function(){window.send_to_editor=window.org_send_to_editor,tb_remove=n,tb_remove()},tb_show("","media-upload.php?type=image&TB_iframe=true")}};var o={classic_answer:function(){var t=0,a=0,o=0;return e(".classic_answer .answerList").children().each(function(){var n=e(this);if(!i.isEmpty(n.find('textarea[name="answerData[][answer]"]').val())){t++,n.find('input[name="answerData[][correct]"]:checked').length&&a++;var r=n.find('input[name="answerData[][points]"]').val();i.isNumber(r)&&r>=0&&o++}}),t?a||e('input[name="disableCorrect"]').is(":checked")&&e('input[name="answerPointsDiffModusActivated"]').is(":checked")&&e('input[name="answerPointsActivated"]').is(":checked")&&"single"==e('input[name="answerType"]:checked').val()?o==t||!n.pointsModus.is(":checked")||(alert(wpTriviaLocalize.no_nummber_points_new),!1):(alert(wpTriviaLocalize.no_correct_msg),!1):(alert(wpTriviaLocalize.no_answer_msg),!1)},free_answer:function(){return!i.isEmpty(e('.free_answer textarea[name="answerData[][answer]"]').val())||(alert(wpTriviaLocalize.no_answer_msg),!1)},cloze_answer:function(){return!i.isEmpty(i.getMceContent("cloze"))||(alert(wpTriviaLocalize.no_answer_msg),!1)},sort_answer:function(){var t=0,a=0;return e(".sort_answer .answerList").children().each(function(){var n=e(this);if(!i.isEmpty(n.find('textarea[name="answerData[][answer]"]').val())){t++;var o=n.find('input[name="answerData[][points]"]').val();i.isNumber(o)&&o>=0&&a++}}),t?a==t||!n.pointsModus.is(":checked")||(alert(wpTriviaLocalize.no_nummber_points_new),!1):(alert(wpTriviaLocalize.no_answer_msg),!1)},matrix_sort_answer:function(){var t=0,a=0,o=!0,r=0;return e(".matrix_sort_answer .answerList").children().each(function(){var n=e(this),c=n.find('input[name="answerData[][points]"]').val();i.isEmpty(n.find('textarea[name="answerData[][answer]"]').val())?i.isEmpty(n.find('textarea[name="answerData[][sort_string]"]').val())||(r++,i.isNumber(c)&&c>=0&&a++):(t++,r++,i.isEmpty(n.find('textarea[name="answerData[][sort_string]"]').val())&&(o=!1),i.isNumber(c)&&c>=0&&a++)}),t?o?a==r||!n.pointsModus.is(":checked")||(alert(wpTriviaLocalize.no_nummber_points_new),!1):(alert(wpTriviaLocalize.no_sort_element_criterion),!1):(alert(wpTriviaLocalize.no_answer_msg),!1)},assessment_answer:function(){return!i.isEmpty(i.getMceContent("assessment"))||(alert(wpTriviaLocalize.no_answer_msg),!1)}},r=function(){e("#wpTrivia_tip").change(function(){i.displayChecked(this,e("#wpTrivia_tipBox"))}).change(),e("#wpTrivia_correctSameText").change(function(){i.displayChecked(this,e("#wpTrivia_incorrectMassageBox"),!0)}).change(),e('input[name="answerType"]').click(function(){n.answerChildren.hide();var t=this.value;if("single"==t?(e("#singleChoiceOptions").show(),e('input[name="disableCorrect"]').change()):(e("#singleChoiceOptions").hide(),e(".classic_answer .wpTrivia_classCorrect").parent().parent().show()),"single"==t||"multiple"==t){var i="single"==t?"radio":"checkbox";t="classic_answer",e(".wpTrivia_classCorrect").each(function(){e("<input type="+i+" />").attr({name:this.name,value:this.value,checked:this.checked}).addClass("wpTrivia_classCorrect wpTrivia_checkbox").insertBefore(this)}).remove()}a=void 0!=o[t]?o[t]:e.noop(),e("."+t).show()}),e('input[name="answerType"]:checked').click(),e(".deleteAnswer").click(t.answerRemove),e(".addAnswer").click(function(){var i=e(this).siblings("ul"),a=i.find("li:eq(0)").clone();return a.find(".wpTrivia_checkbox").removeAttr("checked"),a.find(".wpTrivia_text").val(""),a.find(".wpTrivia_points").val(1),a.find(".deleteAnswer").click(t.answerRemove),a.find(".addMedia").click(t.addMediaClick),a.appendTo(i),!1}),e(".sort_answer ul, .classic_answer ul, .matrix_sort_answer ul").sortable({handle:".wpTrivia_move"}),e("#saveQuestion").click(function(){return!!t.globalValidate()&&(t.generateArrayIndex(),!0)}),e(n.pointsModus).change(function(){i.displayChecked(this,e(".wpTrivia_answerPoints")),i.displayChecked(this,e("#wpTrivia_showPointsBox")),i.displayChecked(this,n.gPoints,!1,!0),i.displayChecked(this,e('input[name="answerPointsDiffModusActivated"]'),!0,!0),this.checked?(e('input[name="answerPointsDiffModusActivated"]').change(),e('input[name="disableCorrect"]').change()):(e(".classic_answer .wpTrivia_classCorrect").parent().parent().show(),e('input[name="disableCorrect"]').attr("disabled","disabled"))}).change(),e('select[name="category"]').change(function(){var t=e(this),i=e("#categoryAddBox").hide();"-1"==t.val()&&i.show()}).change(),e("#categoryAddBtn").click(function(){t.addCategory()}),e(".addMedia").click(t.addMediaClick),e('input[name="answerPointsDiffModusActivated"]').change(function(){i.displayChecked(this,e('input[name="disableCorrect"]'),!0,!0),this.checked?e('input[name="disableCorrect"]').change():e(".classic_answer .wpTrivia_classCorrect").parent().parent().show()}).change(),e('input[name="disableCorrect"]').change(function(){i.displayChecked(this,e(".classic_answer .wpTrivia_classCorrect").parent().parent(),!0)}).change(),e("#clickPointDia").click(function(){return e(".pointDia").toggle("fast"),!1}),e('input[name="template"]').click(function(a){if("0"==e('select[name="templateSaveList"]').val()&&i.isEmpty(e('input[name="templateName"]').val()))return alert(wpTriviaLocalize.temploate_no_name),
a.preventDefault(),!1;t.generateArrayIndex()}),e('select[name="templateSaveList"]').change(function(){var t=e('input[name="templateName"]');"0"==e(this).val()?t.show():t.hide()}).change()};!function(){n.answerChildren.hide(),r()}()},statistic:function(){var t=this,a=e("#quizId").val(),n="users",o={currentPage:e("#wpTrivia_currentPage"),pageLeft:e("#wpTrivia_pageLeft"),pageRight:e("#wpTrivia_pageRight"),testSelect:e("#testSelect")};t={loadStatistic:function(e,t){var a={userId:e};i.ajaxPost("statisticLoad",a,function(e){})},loadUsersStatistic:function(){},loadUsersStatistic_:function(n,o){var r={userId:n,quizId:a,testId:o};t.toggleLoadBox(!1),i.ajaxPost("statisticLoad",r,function(i){e.each(i.question,function(){var i=e("#wpTrivia_tr_"+this.questionId);t.setStatisticData(i,this)}),e.each(i.category,function(i,a){var n=e("#wpTrivia_ctr_"+i);t.setStatisticData(n,a)}),e("#testSelect option:gt(0)").remove();var a=e("#testSelect");e.each(i.tests,function(){var t=e(document.createElement("option"));t.val(this.id),t.text(this.date),i.testId==this.id&&t.attr("selected",!0),a.append(t)}),t.parseFormData(i.formData),e("#userSelect").val(n),e("#testSelect").val(o),t.toggleLoadBox(!0)})},parseFormData:function(t){var i=e("#wpTrivia_form_box");if(null==t)return void i.hide();e.each(t,function(t,i){e("#form_id_"+t).text(i)}),i.show()},setStatisticData:function(e,t){e.find(".wpTrivia_cCorrect").text(t.correct),e.find(".wpTrivia_cIncorrect").text(t.incorrect),e.find(".wpTrivia_cTip").text(t.hint),e.find(".wpTrivia_cPoints").text(t.points),e.find(".wpTrivia_cResult").text(t.result),e.find(".wpTrivia_cTime").text(t.questionTime),e.find(".wpTrivia_cCreateTime").text(t.date)},toggleLoadBox:function(t){var i=e("#wpTrivia_loadData"),a=e("#wpTrivia_content");t?(i.hide(),a.show()):(a.hide(),i.show())},reset:function(n){var r=e("#userSelect").val();if(confirm(wpTriviaLocalize.reset_statistics_msg)){var c={quizId:a,userId:r,testId:o.testSelect.val(),type:n};t.toggleLoadBox(!1),i.ajaxPost("statisticReset",c,function(){t.loadUsersStatistic()})}},loadStatisticOverview:function(n){var r={quizId:a,pageLimit:e("#wpTrivia_pageLimit").val(),onlyCompleted:Number(e("#wpTrivia_onlyCompleted").is(":checked")),page:o.currentPage.val(),nav:Number(n)};t.toggleLoadBox(!1),i.ajaxPost("statisticLoadOverview",r,function(i){var a=e("#wpTrivia_statistics_overview_data"),n=a.children(),o=n.first().clone();n.slice(1).remove(),e.each(i.items,function(){var i=o.clone();t.setStatisticData(i,this),i.find("a").text(this.userName).data("userId",this.userId).click(function(){return e("#userSelect").val(e(this).data("userId")),e("#wpTrivia_typeUser").click(),!1}),i.show().appendTo(a)}),o.remove(),t.toggleLoadBox(!0),void 0!=i.page&&t.handleNav(i.page)})},handleNav:function(i){for(var a=e("#wpTrivia_currentPage").empty(),n=1;n<=i;n++)e(document.createElement("option")).val(n).text(n).appendTo(a);t.checkNavBar()},checkNavBar:function(){var e=o.currentPage.val();1==e?o.pageLeft.hide():o.pageLeft.show(),e==o.currentPage.children().length?o.pageRight.hide():o.pageRight.show()},refresh:function(){"users"==n?t.loadUsersStatistic():"formOverview"==n?t.loadFormsOverview(!0):t.loadStatisticOverview(!0)},loadFormsOverview:function(n){var o={quizId:a,pageLimit:e("#wpTrivia_fromPageLimit").val(),onlyUser:e("#wpTrivia_formUser").val(),page:e("#wpTrivia_formCurrentPage").val(),nav:Number(n)};t.toggleLoadBox(!1),i.ajaxPost("statisticLoadFormOverview",o,function(i){var a=e("#wpTrivia_statistics_form_data"),n=a.children(),o=n.first().clone();n.slice(1).remove(),e.each(i.items,function(){var i=o.clone();t.setStatisticData(i,this),i.find("a").text(this.userName).data("userId",this.userId).data("testId",this.testId).click(function(){return t.switchTabOnLoad("users"),t.loadUsersStatistic_(e(this).data("userId"),e(this).data("testId")),!1}),i.show().appendTo(a)}),o.remove(),t.toggleLoadBox(!0),void 0!=i.page&&t.handleFormNav(i.page)})},handleFormNav:function(i){for(var a=e("#wpTrivia_formCurrentPage").empty(),n=1;n<=i;n++)e(document.createElement("option")).val(n).text(n).appendTo(a);t.checkFormNavBar()},checkFormNavBar:function(){var t=e("#wpTrivia_formCurrentPage").val();1==t?e("#wpTrivia_formPageLeft").hide():e("#wpTrivia_formPageLeft").show(),t==e("#wpTrivia_formCurrentPage").children().length?e("#wpTrivia_formPageRight").hide():e("#wpTrivia_formPageRight").show()},switchTabOnLoad:function(t){e(".wpTrivia_tab").removeClass("button-primary").addClass("button-secondary"),e(".wpTrivia_tabContent").hide();var i=e("#wpTrivia_typeOverview");"users"==t?(n="users",e("#wpTrivia_tabUsers").show(),i=e("#wpTrivia_typeUser")):"formOverview"==t?(n="formOverview",e("#wpTrivia_tabFormOverview").show(),i=e("#wpTrivia_typeForm")):(n="overview",e("#wpTrivia_tabOverview").show()),i.removeClass("button-secondary").addClass("button-primary")}},function(){e("#userSelect, #testSelect").change(function(){t.loadUsersStatistic()}),e(".wpTrivia_update").click(function(){t.refresh()}),e("#wpTrivia_reset").click(function(){t.reset(0)}),e("#wpTrivia_resetUser").click(function(){t.reset(1)}),e(".wpTrivia_resetComplete").click(function(){t.reset(2)}),e(".wpTrivia_tab").click(function(){var i=e(this);return e(".wpTrivia_tab").removeClass("button-primary").addClass("button-secondary"),i.removeClass("button-secondary").addClass("button-primary"),e(".wpTrivia_tabContent").hide(),"wpTrivia_typeUser"==i.attr("id")?(n="users",e("#wpTrivia_tabUsers").show(),t.loadUsersStatistic()):"wpTrivia_typeForm"==i.attr("id")?(n="formOverview",e("#wpTrivia_tabFormOverview").show(),t.loadFormsOverview(!0)):(n="overview",e("#wpTrivia_tabOverview").show(),t.loadStatisticOverview(!0)),!1}),e("#wpTrivia_onlyCompleted").change(function(){o.currentPage.val(1),t.loadStatisticOverview(!0)}),e("#wpTrivia_pageLimit").change(function(){o.currentPage.val(1),t.loadStatisticOverview(!0)}),o.pageLeft.click(function(){o.currentPage.val(Number(o.currentPage.val())-1),t.loadStatisticOverview(!1),t.checkNavBar()}),o.pageRight.click(function(){o.currentPage.val(Number(o.currentPage.val())+1),t.loadStatisticOverview(!1),t.checkNavBar()}),o.currentPage.change(function(){t.loadStatisticOverview(!1),t.checkNavBar()}),e("#wpTrivia_formUser, #wpTrivia_fromPageLimit").change(function(){e("#wpTrivia_formCurrentPage").val(1),t.loadFormsOverview(!0)}),e("#wpTrivia_formPageLeft").click(function(){e("#wpTrivia_formCurrentPage").val(Number(o.currentPage.val())-1),t.loadFormsOverview(!1),t.checkFormNavBar()}),e("#wpTrivia_formPageRight").click(function(){e("#wpTrivia_formCurrentPage").val(Number(o.currentPage.val())+1),t.loadFormsOverview(!1),t.checkFormNavBar()}),e("#wpTrivia_formCurrentPage").change(function(){t.loadFormsOverview(!1),t.checkFormNavBar()}),t.loadUsersStatistic()}()},statisticNew:function(){var a=e("#quizId").val(),n=null,o=null,r={data:{quizId:a,users:-1,pageLimit:100,dateFrom:0,dateTo:0,generateNav:0},changeFilter:function(){var t=function(e){var t=e.datepicker("getDate");return null===t?0:t.getTime()/1e3};return e.extend(this.data,{users:e("#wpTrivia_historyUser").val(),pageLimit:e("#wpTrivia_historyPageLimit").val(),dateFrom:t(e("#datepickerFrom")),dateTo:t(e("#datepickerTo")),generateNav:1}),this.data}},c={data:{pageLimit:100,onlyCompleted:0,generateNav:0,quizId:a},changeFilter:function(){e.extend(this.data,{pageLimit:e("#wpTrivia_overviewPageLimit").val(),onlyCompleted:Number(e("#wpTrivia_overviewOnlyCompleted").is(":checked")),generateNav:1})}},s={deleteUserStatistic:function(t,n){if(!confirm(wpTriviaLocalize.reset_statistics_msg))return!1;var o={refId:t,userId:n,quizId:a,type:0};i.ajaxPost("statisticResetNew",o,function(){e("#wpTrivia_user_overlay").hide(),r.changeFilter(),u.loadHistoryAjax(),c.changeFilter(),u.loadOverviewAjax()})},deleteAll:function(){if(!confirm(wpTriviaLocalize.reset_statistics_msg))return!1;var e={quizId:a,type:1};i.ajaxPost("statisticResetNew",e,function(){r.changeFilter(),u.loadHistoryAjax(),c.changeFilter(),u.loadOverviewAjax()})}},u={loadHistoryAjax:function(){var t=e.extend({page:r.data.generateNav?1:n.getCurrentPage()},r.data);u.loadBox(!0);var a=e("#wpTrivia_historyLoadContext").hide();i.ajaxPost("statisticLoadHistory",t,function(t){a.html(t.html).show(),t.navi&&n.setNumPage(t.navi),r.data.generateNav=0,a.find(".user_statistic").click(function(){return u.loadUserAjax(0,e(this).data("ref_id"),!1),!1}),a.find(".wpTrivia_delete").click(function(){return s.deleteUserStatistic(e(this).parents("tr").find(".user_statistic").data("ref_id"),0),!1}),u.loadBox(!1)})},loadUserAjax:function(t,n,o){e("#wpTrivia_user_overlay, #wpTrivia_loadUserData").show();var r=e("#wpTrivia_user_content").hide(),c={quizId:a,userId:t,refId:n,avg:Number(o)};i.ajaxPost("statisticLoadUser",c,function(i){r.html(i.html),r.find(".wpTrivia_update").click(function(){return u.loadUserAjax(t,n,o),!1}),r.find("#wpTrivia_resetUserStatistic").click(function(){s.deleteUserStatistic(n,t)}),r.find(".statistic_data").click(function(){return e(this).parents("tr").next().toggle("fast"),!1}),e("#wpTrivia_loadUserData").hide(),r.show()})},loadBox:function(t,i){t?e("#wpTrivia_loadDataHistory").show():e("#wpTrivia_loadDataHistory").hide()},loadOverviewAjax:function(){var t=e.extend({page:c.data.generateNav?1:o.getCurrentPage()},c.data);e("#wpTrivia_loadDataOverview").show();var a=e("#wpTrivia_overviewLoadContext").hide();i.ajaxPost("statisticLoadOverviewNew",t,function(t){a.html(t.html).show(),t.navi&&o.setNumPage(t.navi),c.data.generateNav=0,a.find(".user_statistic").click(function(){return u.loadUserAjax(e(this).data("user_id"),0,!0),!1}),a.find(".wpTrivia_delete").click(function(){return s.deleteUserStatistic(0,e(this).parents("tr").find(".user_statistic").data("user_id")),!1}),e("#wpTrivia_loadDataOverview").hide()})}};!function(){n=new t(e("#historyNavigation"),{onChange:function(){u.loadHistoryAjax()}}),o=new t(e("#overviewNavigation"),{onChange:function(){u.loadOverviewAjax()}}),e("#datepickerFrom").datepicker({closeText:wpTriviaLocalize.closeText,currentText:wpTriviaLocalize.currentText,monthNames:wpTriviaLocalize.monthNames,monthNamesShort:wpTriviaLocalize.monthNamesShort,dayNames:wpTriviaLocalize.dayNames,dayNamesShort:wpTriviaLocalize.dayNamesShort,dayNamesMin:wpTriviaLocalize.dayNamesMin,dateFormat:wpTriviaLocalize.dateFormat,firstDay:wpTriviaLocalize.firstDay,changeMonth:!0,onClose:function(t){e("#datepickerTo").datepicker("option","minDate",t)}}),e("#datepickerTo").datepicker({closeText:wpTriviaLocalize.closeText,currentText:wpTriviaLocalize.currentText,monthNames:wpTriviaLocalize.monthNames,monthNamesShort:wpTriviaLocalize.monthNamesShort,dayNames:wpTriviaLocalize.dayNames,dayNamesShort:wpTriviaLocalize.dayNamesShort,dayNamesMin:wpTriviaLocalize.dayNamesMin,dateFormat:wpTriviaLocalize.dateFormat,firstDay:wpTriviaLocalize.firstDay,changeMonth:!0,onClose:function(t){e("#datepickerFrom").datepicker("option","maxDate",t)}}),e("#filter").click(function(){r.changeFilter(),u.loadHistoryAjax()}),e("#wpTrivia_overlay_close").click(function(){e("#wpTrivia_user_overlay").hide()}),e("#wpTrivia_tabHistory .wpTrivia_update").click(function(){return r.changeFilter(),u.loadHistoryAjax(),!1}),e("#wpTrivia_tabOverview .wpTrivia_update").click(function(){return c.changeFilter(),u.loadOverviewAjax(),!1}),e(".wpTrivia_resetComplete").click(function(){return s.deleteAll(),!1}),e("#overviewFilter").click(function(){c.changeFilter(),u.loadOverviewAjax()}),r.changeFilter(),u.loadHistoryAjax(),c.changeFilter(),u.loadOverviewAjax()}()}};!function(){a();var t=e.noop;e(".wpTrivia_questionEdit").length?t=n.questionEdit:e(".wpTrivia_globalSettings").length?t=n.gobalSettings:e(".wpTrivia_statistics").length?t=n.statistic:e(".wpTrivia_statisticsNew").length&&(t=n.statisticNew),t(),e(".wpTrivia_demoImgBox a").mouseover(function(t){var i=e(this),a=e(document).width(),n=i.siblings().outerWidth(!0);if(t.pageX+n>a){var o=a-(t.pageX+n+30);e(this).next().css("left",o+"px")}e(this).next().show()}).mouseout(function(){e(this).next().hide()}).click(function(){return!1})}()}()});